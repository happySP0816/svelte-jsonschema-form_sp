---
title: SvelteKit
sidebar:
  order: 1
---

import { Code, Tabs, TabItem } from "@astrojs/starlight/components";

import Npm from '@/components/npm.astro';

import clientCode from './_sveltekit-client.svelte.invalid?raw';
import serverCode from './_sveltekit-server.ts.invalid?raw';

Since this is a `Svelte` library, you may want to use it with the `SvelteKit`.

With this package you will be able to perform server-side validation of form data
even if the user has `JavaScript` disabled.

## Installation

<Npm pkg="@sjsf/form @sjsf/sveltekit" />

## Example

<Tabs>
  <TabItem label='+page.svelte' >
    <Code code={clientCode} lang='svelte' />
  </TabItem>
  <TabItem label='+page.server.ts'>
    <Code code={serverCode} lang='typescript' />
  </TabItem>
</Tabs>

## Server

On the server side you should implement at least one [action](https://svelte.dev/docs/kit/form-actions)
which will always return the result of `validateForm` function (`redirect` and `error` helpers are allowed).

```typescript
export const actions = {
  default: async (event) => {
    const form = validateForm({/* ... */})
    if (!form.isValid) {
      return fail(400, { form });
    }
    return {
      form,
    };
  },
} satisfies Actions;
```

:::note

You can use any convenient name instead of `form`

:::

If you want to populate form from database, you can use `initForm` function inside the `load` function.

```typescript
export const load = async () => {
  const data = await getData();
  const form = initForm({ schema, validator, initialValue: data });
  return { form };
};
```

:::note

The name of the `initForm` function result should match the name from the `action`

:::

## Client

On the client side you should call `useSvelteKitForm`.

```typescript
import type { PageData, ActionData } from './$types';

const { form, mutation, enhance } = useSvelteKitForm(
  meta<ActionData, PageData>(), "form", { /* form options */ }
);
```

:::note

The error type will be inferred from `ActionData` and the form data type from `PageData`.

If you did not use `initForm` in the `load` function,
the third generic parament of the `meta` function will be used as the form data type
(the default is `SchemaValue`).

:::

According to Svelte documentation your form should always use `POST` requests.

```svelte
<form use:enhance method="POST" novalidate style="display: flex; flex-direction: column; gap: 1rem">
  <FormContent bind:value={form.formValue} />
  <button type="submit" style="padding: 0.5rem;">Submit</button>
</form>
```

## Progressive enhancement

You should always use `enhance` action on your forms.

But if you really want the form to work with `JavaScript` disabled, then check out the list of restrictions.

